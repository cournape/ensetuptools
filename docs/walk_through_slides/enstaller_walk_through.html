<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Enstaller code walk-through</title>
<!-- metadata -->
<meta name="generator" content="S5" />
<meta name="version" content="S5 1.1" />
<meta name="presdate" content="20050728" />
<meta name="author" content="Eric A. Meyer" />
<meta name="company" content="Complex Spiral Consulting" />
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<link rel="stylesheet" href="ui/default/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/default/outline.css" type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/default/print.css" type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/default/opera.css" type="text/css" media="projection" id="operaFix" />
<!-- S5 JS -->
<script src="ui/default/slides.js" type="text/javascript"></script>
</head>
<body>

<div class="layout">
<div id="controls"><!-- DO NOT EDIT --></div>
<div id="currentSlide"><!-- DO NOT EDIT --></div>
<div id="header"></div>
<div id="footer">
<h1>enthought.enstaller/docs/DESIGN.txt</h1>
<!-- <h2>[slide show title here]</h2> -->
</div>

</div>


<div class="presentation">

<div class="slide">
<h1>Enstaller code walk-through</h1>
<h2>summary of enthought.enstaller/docs/DESIGN.txt</h2>
<h3>Rick Ratzel</h3>
<h2>2007-08-07</h2>
<!-- <h4>[affiliation of presenter]</h4> -->
</div>


<div class="slide">
<h1>ez_enstaller_setup.py</h1>
<ul>
<li>Modeled after setuptool's ez_setup.py.</li>
<li>"one-time" use for bootstrap installing the enstaller egg(s).</li>
<li>Some duplication of code from Enstaller package.</li>
<li>Needs -U option for upgrading Enstaller.</li>
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>bootstrapper.py</h1>
<ul>
<li>Called from ez_enstaller_setup.py.</li>
<li>Downloads and installs setuptools if necesary.</li>
<li>Inherits from EasyInstaller.</li>
<li>Used only for bootstrapping from ez_enstaller_setup.py.</li>
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>launcher.py</h1>
<ul>
<li>Launcher class launches a standalone Enstaller app.</li>
<li>Wraps a call to "main()" in an exception handler to provide "post mortem" files in the event of a crash.</li>
<li>Provides the setuptools "console_scripts" entry point.</li>
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>main.py</h1>
<ul>
<li>Sets up the appropriate Enstaller objects for a standalone session.</li>
<li>Developers wishing to embed Enstaller might look here for an example.</li>
<li>Processes command-line and uses those options to instantiate a Session object then either a CLI or GUI object based on options.</li>
<li>The Session object is initialized here.</li>
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>session.py</h1>
<ul>
<li>Session object is responsible for:</li>
   <ul>
   <li>installing</li>
   <li>removing</li>
   <li>activating</li>
   <li>deactivating</li>
   <li>finding/listing installed and repository packages</li>
   </ul>
<li>HasTraits!</li>
<li>Maintains the state of the session and environment Enstaller is working in.</li>
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>enstaller_engine.py<br>
easy_installer.py</h1>
<ul>
<li>EasyInstaller embeds the "main" of setuptools' easy_install entry point.</li>
<li>Not (supposed to be) Enstaller-specific.</li>
<li>Provides an easy-to-use API which can be extended.</li>
<li>Engine extends EasyInstaller for Enstaller-specific features:</li>
   <ul>
   <li>remove</li>
   <li>post-install</li>
   <li>relocation</li>
   </ul>
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>Repository family of classes<br>
repository_factory.py</h1>
<ul>
<li>Maintain lists of Package objects</li>
<li>Repository class: abstract base for all others.</li>
<li>LocalRepository class: Repositories that are local on disk.</li>
   <ul>
   <li>Also used for maintaining installed packages.</li>
   </ul>
<li>RemoteRepository class: not local, accesses through a series of http calls.</li>
<li>PypiRepository class: Reads PyPI-style repositories which support either XMLRPC calls or have a specific heirarchy of pages.</li>
<li>repository_factory contains create_repository(), which creates and returns the appropriate repository object based on the repo URL.</li>
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>package.py</h1>
<ul>
<li>Maintains all information about a given package.</li>
<li>Multiple versions of the same package result in multiple package objects.</li>
<li>Instantiated within Repository objects.</li>
<li>Several traits describing various attributes of a package.</li>
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>cli.py</h1>
<ul>
<li>Command-line interface to an Enstaller Session.</li>
<li>Instantiated from main().</li>
<li>Based on command-line options:</li>
   <ul>
   <li>Calls the appropriate method on the session,</li>
   <li>Reads the result from the session,</li>
   <li>Formats the result into text to output to STDOUT.</li>
   </ul>
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>GUI class</h1>
<ul>
<li>Make up the "main" view.</li>
<li>Like the CLI, consists mainly of a Session object.</li>
<li>Unlike CLI, adds button objects and ability to run several Session operations is a single session, in a background thread.</li>
<br>
<br>
<img src="enstaller_repos.png" alt="" title="main view" />
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>PackageTable family of classes<br>
PackageRow family of classes</h1>
<ul>
<li>PackageTable and RepositoryPackageTable are the models for the tables of packages to display.</li>
<li>package_table_view.py and package_table_columns.py contain the view and controller instances/classes.</li>
<li>PackageRow, InstalledPackageRow, RepositoryPackageRow contain references to one or more Package objects.</li>
<li>PackageRow classes (and the PackageTable handlers/controllers which operate on them) are fairly complex</li>
<br>
<br>
<img src="enstaller_actions.png" alt="" title="table view" />
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


<div class="slide">
<h1>EULA Manager<br>
Preference Manager</h1>
<ul>
<li>eula_manager_gui.py and eula_manager_gui_view.py contain classes for displaying the EULA manager GUI.</li>
<li>preference_manager_view.py and preference_views.py contain classes for displaying the Preference Manager GUI.</li>
</ul>
<div class="handout">
[any material that should appear in print but not on the slide]
</div>
</div>


</div>

</body>
</html>
